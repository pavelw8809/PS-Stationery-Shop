{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\WSB_SELCOR\\\\PROJECT\\\\src\\\\containers\\\\LoginSite\\\\LoginSite.js\";\n// LoginSite -> UserBtn, Account - Login site\nimport React, { useState, useContext } from 'react';\nimport './LoginSite.scss';\nimport Axios from 'axios';\nimport { UserContext, ServerPath } from '../App';\nimport { useHistory, NavLink } from 'react-router-dom';\nimport { IoMdLogIn } from \"react-icons/io\";\nimport Cookies from 'js-cookie';\n\nconst LoginSite = props => {\n  // STATES\n  const [ErrorInfo, setErrorInfo] = useState();\n  const [LoginData, setLoginData] = useState(); // Temporary state for sending login data\n\n  const [User, setUser] = useContext(UserContext); // USEHISTORY HOOK\n\n  const History = useHistory(); // SHOW INFORMATION FROM PROPS\n\n  let cartoption;\n  let addinfo;\n  let infostyle;\n\n  if (typeof props.location.addProps !== 'undefined') {\n    addinfo = props.location.addProps.addinfo;\n    cartoption = true;\n  } else {\n    infostyle = {\n      display: 'none'\n    };\n  } // FUNCTIONS\n\n\n  const handleUsername = event => {\n    if (event.keyCode === 13) {\n      handleLogin();\n    } else {\n      setLoginData({ ...LoginData,\n        user: event.target.value\n      });\n    }\n  };\n\n  const handlePassword = event => {\n    if (event.keyCode === 13) {\n      handleLogin();\n    } else {\n      setLoginData({ ...LoginData,\n        password: event.target.value,\n        userid: User.userinfo.login\n      });\n    }\n  };\n\n  const handleLogin = () => {\n    Axios.post(ServerPath + \"Login.php\", LoginData).then(function (res) {\n      //console.log(res.data);\n      if (res.data.uid) {\n        //console.log(res.data);\n        setUser({ ...User,\n          userinfo: res.data,\n          usercontrol: true\n        });\n        Cookies.set('pssession', res.data.sessionid); //setLogShow(false);\n\n        if (cartoption === true) {\n          History.push('/cart');\n        } else {\n          History.push('/');\n        }\n      } else {\n        let errordata = React.createElement(\"div\", {\n          className: \"LoginErrInfo\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71\n          },\n          __self: this\n        }, res.data.map((r, index) => {\n          return React.createElement(\"p\", {\n            key: index,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 74\n            },\n            __self: this\n          }, r);\n        }));\n        setErrorInfo(errordata);\n      }\n    });\n  };\n\n  return React.createElement(\"div\", {\n    className: \"LoginAuthWindow\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(IoMdLogIn, {\n    size: 70,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }), React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, \"OKNO LOGOWANIA\"), React.createElement(\"div\", {\n    className: \"LoginAddInfo\",\n    style: infostyle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, addinfo), React.createElement(\"label\", {\n    htmlFor: \"mail\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, \"Nazwa u\\u017Cytkownika\"), React.createElement(\"input\", {\n    type: \"text\",\n    name: \"mail\",\n    onChange: handleUsername,\n    onKeyDown: handleUsername,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    htmlFor: \"password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, \"Has\\u0142o\"), React.createElement(\"input\", {\n    type: \"password\",\n    name: \"password\",\n    onChange: handlePassword,\n    onKeyDown: handlePassword,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    className: \"LoginLogBtn\",\n    type: \"submit\",\n    onClick: handleLogin,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, \"ZALOGUJ\"), ErrorInfo, React.createElement(\"hr\", {\n    className: \"separator\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }), React.createElement(\"p\", {\n    className: \"LoginRegP\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, \"Nie masz konta?\"), React.createElement(NavLink, {\n    className: \"LoginRegBtnContainer\",\n    to: \"/regform\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"LoginRegBtn\",\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, \"ZAREJESTRUJ KONTO\")));\n};\n\nexport default LoginSite;","map":{"version":3,"sources":["C:/xampp/htdocs/WSB_SELCOR/PROJECT/src/containers/LoginSite/LoginSite.js"],"names":["React","useState","useContext","Axios","UserContext","ServerPath","useHistory","NavLink","IoMdLogIn","Cookies","LoginSite","props","ErrorInfo","setErrorInfo","LoginData","setLoginData","User","setUser","History","cartoption","addinfo","infostyle","location","addProps","display","handleUsername","event","keyCode","handleLogin","user","target","value","handlePassword","password","userid","userinfo","login","post","then","res","data","uid","usercontrol","set","sessionid","push","errordata","map","r","index"],"mappings":"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","sourcesContent":["// LoginSite -> UserBtn, Account - Login site\r\n\r\nimport React, { useState, useContext } from 'react';\r\nimport './LoginSite.scss'\r\nimport Axios from 'axios';\r\nimport { UserContext, ServerPath } from '../App';\r\nimport { useHistory, NavLink } from 'react-router-dom';\r\nimport { IoMdLogIn } from \"react-icons/io\";\r\nimport Cookies from 'js-cookie';\r\n\r\nconst LoginSite = (props) => {\r\n\r\n    // STATES\r\n\r\n    const [ErrorInfo, setErrorInfo] = useState();\r\n    const [LoginData, setLoginData] = useState();       // Temporary state for sending login data\r\n    const [User, setUser] = useContext(UserContext);\r\n\r\n    // USEHISTORY HOOK\r\n\r\n    const History = useHistory();\r\n\r\n    // SHOW INFORMATION FROM PROPS\r\n\r\n    let cartoption;\r\n    let addinfo;\r\n    let infostyle;\r\n\r\n    if (typeof(props.location.addProps) !== 'undefined') {\r\n        addinfo = props.location.addProps.addinfo;\r\n        cartoption = true;\r\n    } else {\r\n        infostyle = {display: 'none'};\r\n    }\r\n\r\n    // FUNCTIONS\r\n\r\n    const handleUsername = (event) => {\r\n        if (event.keyCode === 13) {\r\n            handleLogin();\r\n        } else {\r\n            setLoginData({...LoginData, user: event.target.value});\r\n        }\r\n    }\r\n\r\n    const handlePassword = (event) => {\r\n        if (event.keyCode === 13) {\r\n            handleLogin();\r\n        } else {\r\n            setLoginData({...LoginData, password: event.target.value, userid: User.userinfo.login});\r\n        }\r\n    }\r\n\r\n    const handleLogin = () => {\r\n        Axios.post(ServerPath + \"Login.php\", LoginData)\r\n        .then(function(res) {\r\n            //console.log(res.data);\r\n            \r\n            if (res.data.uid) {\r\n                //console.log(res.data);\r\n                setUser({...User, userinfo: res.data, usercontrol: true});\r\n                Cookies.set('pssession', res.data.sessionid);\r\n                //setLogShow(false);\r\n                if (cartoption === true) {\r\n                    History.push('/cart');\r\n                } else {\r\n                    History.push('/');\r\n                }\r\n            } else {\r\n                let errordata = (\r\n                    <div className=\"LoginErrInfo\">\r\n                        {res.data.map((r, index) => {\r\n                            return(\r\n                                <p key={index}>{r}</p>\r\n                            )\r\n                        })}\r\n                    </div>\r\n                \r\n                )\r\n                setErrorInfo(errordata);\r\n            }\r\n        })\r\n    }\r\n\r\n    return(\r\n        <div className = \"LoginAuthWindow\">\r\n            <IoMdLogIn size={70}/>\r\n            <h3>OKNO LOGOWANIA</h3>\r\n            <div className=\"LoginAddInfo\" style={infostyle}>{addinfo}</div>\r\n            <label htmlFor=\"mail\">Nazwa użytkownika</label>\r\n            <input type=\"text\" name=\"mail\" onChange={handleUsername} onKeyDown={handleUsername}></input><br/>\r\n            <label htmlFor=\"password\">Hasło</label>\r\n            <input type=\"password\" name=\"password\" onChange={handlePassword} onKeyDown={handlePassword}></input><br/>\r\n            <button className=\"LoginLogBtn\" type=\"submit\" onClick={handleLogin}>ZALOGUJ</button>\r\n            {ErrorInfo}\r\n            <hr className=\"separator\"/>\r\n            <p className=\"LoginRegP\">Nie masz konta?</p>\r\n            <NavLink className=\"LoginRegBtnContainer\" to=\"/regform\"><button className=\"LoginRegBtn\" type=\"submit\">ZAREJESTRUJ KONTO</button></NavLink>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default LoginSite;"]},"metadata":{},"sourceType":"module"}