{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\WSB_SELCOR\\\\PROJECT\\\\src\\\\components\\\\ChangePassword\\\\ChangePassword.js\";\n// ChangePassword -> Account, ShowAccountData\nimport React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Axios from 'axios';\nimport { ServerPath } from '../../containers/App';\n\nconst ChangePassword = props => {\n  // STATES\n  const [Pass, setPass] = useState({\n    oldpass: \"\",\n    newpass0: \"\",\n    newpass1: \"\"\n  });\n  const [PassError, setErrorPass] = useState(); // USE HISTORY\n\n  const History = useHistory(); // FUNCTIONS\n\n  const handlePassword = (option, event) => {\n    switch (option) {\n      case 0:\n        setPass({ ...Pass,\n          oldpass: event.target.value\n        });\n        break;\n\n      case 1:\n        setPass({ ...Pass,\n          newpass0: event.target.value\n        });\n        break;\n\n      case 2:\n        setPass({ ...Pass,\n          newpass1: event.target.value\n        });\n        break;\n\n      default: // do nothing\n\n    }\n  };\n\n  const changePass = () => {\n    let sendPass = false;\n    let passFormat = new RegExp(\"^(?=.{8,}$)(?=.*?[a-z])(?=.*?[A-Z])(?=.*?[0-9])(?=.*?[\\\\W]).*$\");\n    let testPass = passFormat.test(Pass.newpass1);\n\n    if (Pass.oldpass.length === 0 || Pass.newpass0.length === 0 || Pass.newpass1.length === 0) {\n      setErrorPass(\"Pola nie mogą być puste\");\n      sendPass = false;\n    } else if (Pass.newpass0 !== Pass.newpass1) {\n      setErrorPass(\"Nowopodane hasła nie brzmią identycznie\");\n      sendPass = false;\n    } else if (Pass.oldpass === Pass.newpass0) {\n      setErrorPass(\"Nowe i stare hasło jest takie samo\");\n      sendPass = false;\n    } else if (!testPass) {\n      setErrorPass(\"Hasło musi mieć przynajmniej 8 znaków i składać sie z małych i dużych liter oraz cyfr i znaków specjalnych.\");\n      sendPass = false;\n    } else {\n      setErrorPass();\n      sendPass = true;\n    }\n\n    if (sendPass === true) {\n      let passData = { ...Pass,\n        userid: props.uid\n      };\n      Axios.post(ServerPath + \"ChangePass.php\", passData).then(res => {\n        if (res.data === \"success\") {\n          History.push({\n            pathname: '/info',\n            infoProp: {\n              info: \"Hasło zostało pomyślnie zmienione\"\n            }\n          });\n        } else {\n          setErrorPass(res.data);\n        }\n      });\n    }\n  };\n\n  return React.createElement(\"div\", {\n    className: \"AccountInfo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"PassPanelContainer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"PassPanel\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, \"ZMIANA HAS\\u0141A\"), React.createElement(\"label\", {\n    htmlFor: \"oldpass\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, \"Stare has\\u0142o\"), React.createElement(\"input\", {\n    type: \"password\",\n    name: \"oldpass\",\n    onChange: handlePassword.bind(this, 0),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    htmlFor: \"oldpass\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, \"Nowe has\\u0142o\"), React.createElement(\"input\", {\n    type: \"password\",\n    name: \"oldpass\",\n    onChange: handlePassword.bind(this, 1),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    htmlFor: \"oldpass\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, \"Powt\\xF3rz nowe has\\u0142o\"), React.createElement(\"input\", {\n    type: \"password\",\n    name: \"oldpass\",\n    onChange: handlePassword.bind(this, 2),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  })), React.createElement(\"hr\", {\n    className: \"passseparator\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"PassError\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, PassError), React.createElement(\"div\", {\n    className: \"AccountPanel\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"AccountPanelBtn\",\n    onClick: changePass,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, \"ZMIE\\u0143 HAS\\u0141O\"), React.createElement(\"button\", {\n    className: \"AccountPanelBtn\",\n    onClick: props.changetab,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, \"POWR\\xD3T\")));\n};\n\nexport default ChangePassword;","map":{"version":3,"sources":["C:/xampp/htdocs/WSB_SELCOR/PROJECT/src/components/ChangePassword/ChangePassword.js"],"names":["React","useState","useHistory","Axios","ServerPath","ChangePassword","props","Pass","setPass","oldpass","newpass0","newpass1","PassError","setErrorPass","History","handlePassword","option","event","target","value","changePass","sendPass","passFormat","RegExp","testPass","test","length","passData","userid","uid","post","then","res","data","push","pathname","infoProp","info","bind","changetab"],"mappings":"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","sourcesContent":["// ChangePassword -> Account, ShowAccountData\r\n\r\nimport React, { useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport Axios from 'axios';\r\nimport { ServerPath } from '../../containers/App';\r\n\r\nconst ChangePassword = (props) => {\r\n\r\n    // STATES\r\n\r\n    const [Pass, setPass] = useState({oldpass: \"\", newpass0: \"\", newpass1: \"\"});\r\n    const [PassError, setErrorPass] = useState();\r\n\r\n    // USE HISTORY\r\n\r\n    const History = useHistory();\r\n\r\n    // FUNCTIONS\r\n\r\n    const handlePassword = (option, event) => {\r\n        switch(option) {\r\n            case 0: setPass({...Pass, oldpass: event.target.value}); break;\r\n            case 1: setPass({...Pass, newpass0: event.target.value}); break;\r\n            case 2: setPass({...Pass, newpass1: event.target.value}); break;\r\n            default: // do nothing\r\n        }\r\n    }\r\n\r\n    const changePass = () => {\r\n        let sendPass = false;\r\n        let passFormat = new RegExp(\"^(?=.{8,}$)(?=.*?[a-z])(?=.*?[A-Z])(?=.*?[0-9])(?=.*?[\\\\W]).*$\");\r\n        let testPass = passFormat.test(Pass.newpass1);\r\n        if (Pass.oldpass.length === 0 || Pass.newpass0.length === 0 || Pass.newpass1.length === 0) {\r\n            setErrorPass(\"Pola nie mogą być puste\");\r\n            sendPass = false;\r\n        } else if (Pass.newpass0 !== Pass.newpass1) {\r\n            setErrorPass(\"Nowopodane hasła nie brzmią identycznie\");\r\n            sendPass = false;\r\n        } else if (Pass.oldpass === Pass.newpass0) {\r\n            setErrorPass(\"Nowe i stare hasło jest takie samo\")\r\n            sendPass = false\r\n        } else if (!testPass) {\r\n            setErrorPass(\"Hasło musi mieć przynajmniej 8 znaków i składać sie z małych i dużych liter oraz cyfr i znaków specjalnych.\");\r\n            sendPass = false;\r\n        } else {\r\n            setErrorPass();\r\n            sendPass = true;\r\n        }\r\n\r\n        if (sendPass === true) {\r\n            let passData = {...Pass, userid: props.uid};\r\n            Axios.post(ServerPath + \"ChangePass.php\", passData)\r\n                .then(res => {\r\n                    if (res.data === \"success\") {\r\n                        History.push({\r\n                            pathname: '/info', \r\n                            infoProp: {info: \"Hasło zostało pomyślnie zmienione\"}});\r\n                    } else {\r\n                        setErrorPass(res.data);\r\n                    }\r\n                })\r\n        }\r\n    }\r\n\r\n    return(\r\n        <div className=\"AccountInfo\">\r\n            <div className=\"PassPanelContainer\">\r\n                <div className=\"PassPanel\">\r\n                    <h3>ZMIANA HASŁA</h3>\r\n                    <label htmlFor=\"oldpass\">Stare hasło</label>\r\n                    <input type=\"password\" name=\"oldpass\" onChange={handlePassword.bind(this, 0)}/>\r\n                    <label htmlFor=\"oldpass\">Nowe hasło</label>\r\n                    <input type=\"password\" name=\"oldpass\" onChange={handlePassword.bind(this, 1)}/>\r\n                    <label htmlFor=\"oldpass\">Powtórz nowe hasło</label>\r\n                    <input type=\"password\" name=\"oldpass\" onChange={handlePassword.bind(this, 2)}/>\r\n                </div>\r\n                <hr className=\"passseparator\"/>\r\n            </div>\r\n            <div className=\"PassError\">{PassError}</div>\r\n            <div className=\"AccountPanel\">\r\n                <button className=\"AccountPanelBtn\" onClick={changePass}>ZMIEŃ HASŁO</button>\r\n                <button className=\"AccountPanelBtn\" onClick={props.changetab}>POWRÓT</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ChangePassword;"]},"metadata":{},"sourceType":"module"}