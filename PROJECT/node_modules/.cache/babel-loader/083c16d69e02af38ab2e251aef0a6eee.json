{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\WSB_SELCOR\\\\PROJECT\\\\src\\\\components\\\\UserBtn\\\\UserBtn.js\";\nimport React, { useContext, useState } from 'react';\nimport './UserBtn.scss';\nimport Login from '../Login/Login';\nimport AccountMenu from '../AccountMenu/AccountMenu';\nimport { NavLink, useHistory } from 'react-router-dom';\nimport Axios from 'axios';\nimport { ServerPath, UserContext } from '../../containers/App';\nimport { FaRegUserCircle } from 'react-icons/fa';\nimport Cookies from 'js-cookie';\n\nconst UserBtn = props => {\n  // LOGIN STATES\n  const [User, setUser] = useContext(UserContext); // User State\n\n  const [LogShow, setLogShow] = useState(false); // Show loggin button\n  //const [AccShow, setAccShow] = useState(false);\n\n  const [LoginData, setLoginData] = useState(); // Temporary state for sending login data\n\n  const handleUsername = event => {\n    setLoginData({ ...LoginData,\n      user: event.target.value\n    });\n  };\n\n  const handlePassword = event => {\n    setLoginData({ ...LoginData,\n      password: event.target.value\n    });\n  };\n\n  const handleLogin = () => {\n    //console.log(LoginData.user + \"/\" + LoginData.password);\n    console.log(LoginData);\n    Axios.post(ServerPath + \"Login.php\", LoginData).then(function (res) {\n      console.log(res.data);\n      setUser({\n        userinfo: {\n          id: res.data.u_id,\n          login: res.data.u_login\n        }\n      });\n      Cookies.set('psid', res.data.u_id);\n      Cookies.set('psname', res.data.u_login);\n      setLogShow(false);\n    });\n  }; //let history = useHistory();\n  //console.log(User);\n  // Login pop-up (if user is not logged in)\n\n\n  let windowstyle; //let LoginW;\n\n  const loginWindow = () => {\n    setLogShow(!LogShow);\n  };\n\n  if (!LogShow) {\n    windowstyle = {\n      visibility: 'hidden',\n      opacity: 0,\n      transitionDuration: '0.5s'\n    };\n  } // Acount menu (if user is logged in)\n\n\n  const accountMenu = () => {} //setAccShow(!AccShow)\n  // Checking if user is logged in\n  ;\n\n  let UserInfoBtn;\n  let UserMenu;\n\n  if (!User.userinfo.login) {\n    UserInfoBtn = React.createElement(\"button\", {\n      className: \"LogBtn\",\n      onClick: loginWindow,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, \"ZALOGUJ\");\n    UserMenu = React.createElement(\"div\", {\n      className: \"Login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \"Nazwa u\\u017Cytkownika:\"), React.createElement(\"input\", {\n      type: \"text\",\n      onChange: handleUsername,\n      name: \"login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"pass\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"Has\\u0142o:\"), React.createElement(\"input\", {\n      type: \"password\",\n      onChange: handlePassword,\n      name: \"pass\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"LoginBtn\",\n      onClick: handleLogin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"ZALOGUJ\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"Nie masz konta?\"), React.createElement(NavLink, {\n      to: \"/regform\",\n      className: \"RegBtnContainer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"RegBtn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"ZAREJESTRUJ SI\\u0118\")));\n  } else {\n    UserInfoBtn = React.createElement(\"button\", {\n      className: \"LogBtn AccountBtn\",\n      onClick: loginWindow,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(FaRegUserCircle, {\n      size: 20,\n      className: \"UserIcon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }), User.userinfo.login);\n    UserMenu = React.createElement(AccountMenu, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    });\n  }\n\n  return React.createElement(\"div\", {\n    className: \"UserBtnContainer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, UserInfoBtn, React.createElement(\"div\", {\n    className: \"LoginW\",\n    style: windowstyle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, UserMenu));\n};\n\nexport default UserBtn;","map":{"version":3,"sources":["C:/xampp/htdocs/WSB_SELCOR/PROJECT/src/components/UserBtn/UserBtn.js"],"names":["React","useContext","useState","Login","AccountMenu","NavLink","useHistory","Axios","ServerPath","UserContext","FaRegUserCircle","Cookies","UserBtn","props","User","setUser","LogShow","setLogShow","LoginData","setLoginData","handleUsername","event","user","target","value","handlePassword","password","handleLogin","console","log","post","then","res","data","userinfo","id","u_id","login","u_login","set","windowstyle","loginWindow","visibility","opacity","transitionDuration","accountMenu","UserInfoBtn","UserMenu"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from 'react';\r\nimport './UserBtn.scss';\r\nimport Login from '../Login/Login';\r\nimport AccountMenu from '../AccountMenu/AccountMenu';\r\nimport { NavLink, useHistory } from 'react-router-dom';\r\nimport Axios from 'axios';\r\nimport { ServerPath, UserContext } from '../../containers/App';\r\nimport { FaRegUserCircle } from 'react-icons/fa';\r\nimport Cookies from 'js-cookie';\r\n\r\nconst UserBtn = (props) => {\r\n\r\n    // LOGIN STATES\r\n\r\n    const [User, setUser] = useContext(UserContext);    // User State\r\n    const [LogShow, setLogShow] = useState(false);      // Show loggin button\r\n    //const [AccShow, setAccShow] = useState(false);\r\n    const [LoginData, setLoginData] = useState()        // Temporary state for sending login data\r\n\r\n    const handleUsername = (event) => {\r\n        setLoginData({...LoginData, user: event.target.value});\r\n    }\r\n\r\n    const handlePassword = (event) => {\r\n        setLoginData({...LoginData, password: event.target.value});\r\n    }\r\n\r\n    const handleLogin = () => {\r\n        //console.log(LoginData.user + \"/\" + LoginData.password);\r\n        console.log(LoginData);\r\n        Axios.post(ServerPath + \"Login.php\", LoginData)\r\n        .then(function(res) {\r\n            console.log(res.data);\r\n            setUser({\r\n               userinfo: {\r\n                   id: res.data.u_id,\r\n                   login: res.data.u_login\r\n               } \r\n            })\r\n            Cookies.set('psid', res.data.u_id);\r\n            Cookies.set('psname', res.data.u_login);\r\n            setLogShow(false);\r\n        })\r\n    }\r\n\r\n   //let history = useHistory();\r\n\r\n    //console.log(User);\r\n\r\n    // Login pop-up (if user is not logged in)\r\n\r\n    let windowstyle;\r\n    //let LoginW;\r\n\r\n    const loginWindow = () => {\r\n        setLogShow(!LogShow);\r\n    }\r\n\r\n    if (!LogShow) {\r\n        windowstyle = {\r\n            visibility: 'hidden',\r\n            opacity: 0,\r\n            transitionDuration: '0.5s'\r\n        }\r\n    }\r\n\r\n    // Acount menu (if user is logged in)\r\n\r\n    const accountMenu = () => {\r\n        //setAccShow(!AccShow)\r\n    }\r\n\r\n    \r\n\r\n    // Checking if user is logged in\r\n\r\n    let UserInfoBtn;\r\n    let UserMenu;\r\n\r\n    if (!User.userinfo.login) {\r\n        UserInfoBtn = <button className=\"LogBtn\" onClick={loginWindow}>ZALOGUJ</button>\r\n        UserMenu = (\r\n            <div className=\"Login\">\r\n                <label htmlFor=\"login\">Nazwa użytkownika:</label>\r\n                <input type=\"text\" onChange={handleUsername} name=\"login\"/>\r\n                <label htmlFor=\"pass\">Hasło:</label>\r\n                <input type=\"password\" onChange={handlePassword} name=\"pass\"/>\r\n                <button className=\"LoginBtn\" onClick={handleLogin}>ZALOGUJ</button>\r\n                <p>Nie masz konta?</p>\r\n                <NavLink to=\"/regform\" className=\"RegBtnContainer\">\r\n                    <button className=\"RegBtn\">ZAREJESTRUJ SIĘ</button>\r\n                </NavLink>\r\n            </div>\r\n        )\r\n    } else {\r\n        UserInfoBtn = <button className=\"LogBtn AccountBtn\" onClick={loginWindow}><FaRegUserCircle size={20} className=\"UserIcon\"/>{User.userinfo.login}</button>\r\n        UserMenu = <AccountMenu/>\r\n    }\r\n\r\n    return(\r\n        <div className=\"UserBtnContainer\">\r\n            {UserInfoBtn}\r\n            <div className=\"LoginW\" style={windowstyle}>\r\n                {UserMenu}\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default UserBtn;"]},"metadata":{},"sourceType":"module"}